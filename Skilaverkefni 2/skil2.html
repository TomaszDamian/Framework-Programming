<script type="text/javascript">
window.onload=function(){
	var canvas=document.createElement('canvas');
	var ctx = canvas.getContext("2d");
	var TurningPoint = 0

	canvas.id='thecanvas';
	canvas.width='800';
	canvas.height='800';
	canvas.style.border='1px solid red';
	document.body.appendChild(canvas);
	
	function canvasClear(){
		//made to just clear the canvas so the tanks could be redrawn
		ctx.clearRect(0, 0, canvas.width, canvas.height);
	}

	tank = function(args){
		var x = args.x;
		var y = args.y;
		var width = args.width;
		var height = args.height;
		var ImageLink = args.ImageLink;
		img = new Image()
		img.src = ImageLink
		
		this.image = img
		this.x = x;
		this.y = y;
		this.width = width;
		this.height = height;
		this.ImageLink = ImageLink;
		this.deg = 0
		this.angles_left_to_turn_left = 0
		this.angles_left_to_turn_right = 0
	}
	tank.prototype.Draw = function(args) {
		//Made it so there is no Clear canvas in the Draw function
		//Draw shouldn't also erase the canvas		
		ctx.save();
		var cheight = -50;
		var cwidth = -50;
		ctx.translate(this.x,this.y);
		ctx.rotate(this.deg*Math.PI/180);
		ctx.drawImage(this.image,cheight,cwidth,100,100);
		ctx.translate(0,0);
		ctx.restore();
	};
	tank.prototype.rotateLeft = function() {
		this.deg += 22.5;
	};
	tank.prototype.rotateRight = function() {
		this.deg -= 22.5;
	};

	tank.prototype.implement_physical_laws = function() {
		//If the Tank still has Angles_lef_to_turn_x.
		//decrease Angels_left_to_turn_x and,
		//increase/decrease this.deg by calling this.rotateLeft/right();.
		if(this.angles_left_to_turn_left != 0){
			this.angles_left_to_turn_left -= 1;
			this.rotateLeft();
		};
		//works the same as the one above.
		//this one just makes it rotate to the right
		if(this.angles_left_to_turn_right != 0){
			this.angles_left_to_turn_right -= 1;
			this.rotateRight();
		};
	};

	TankOne = new tank({x:100,y:150,width:100,height:100,ImageLink:"TankOne.png"});
	TankTwo = new tank({x:500,y:500,width:100,height:100,ImageLink:"TankTwo.png"});
	
	//setTimeout to let the image load before drawing it
	setTimeout(function(){
		setInterval(function(){
			//clear canvas..
			canvasClear();
			
			//Draw the Tanks on the canvas..
			TankOne.Draw();
			TankTwo.Draw();

			//turning made possible
			TankOne.implement_physical_laws()
			TankTwo.implement_physical_laws()
		},24);
	},200)
	
	document.onkeydown = keypressed;
	function keypressed(event){
		KeyNumber = event.keyCode;
		console.log(KeyNumber)	
		if(KeyNumber == 65){
			//you want to turn here.
			//put in the amount of times the function has to be called.
			//on the tank.
			if(TankOne.angles_left_to_turn_left === 0){
				TankOne.angles_left_to_turn_left = 4;
			};
		} else if(KeyNumber == 68){
			if(TankOne.angles_left_to_turn_right === 0){
				TankOne.angles_left_to_turn_right = 4;
			};
		}

		if(KeyNumber == 37){
			if(TankOne.angles_left_to_turn_left === 0){
				TankOne.angles_left_to_turn_left = 4;
			};
		} else if(KeyNumber == 39){
			if(TankOne.angles_left_to_turn_right === 0){
				TankOne.angles_left_to_turn_right = 4;
			};
		}
	}
}
</script>